name: k8s.configuration.apply
description: applies configuration to a k8s cluster
inputs:
  sshUsername:
    string:
      constraints: { minLength: 1 }
      description: username for ssh auth w/ k8s master
  sshKey:
    string:
      constraints: { minLength: 1 }
      description: '[private] key for ssh auth w/ k8s master'
      isSecret: true
  hostname:
    string:
      constraints: { minLength: 1 }
      description: hostname of k8s master
  deployment:
    file:
      description: k8s deployment
  namespace:
    string:
      description: namespace of deployment
      default: default
run:
  container:
    image: { ref: 'opspecpkgs/k8s.configuration.apply:1.0.0' }
    cmd: [ /cmd.sh ]
    files: { /cmd.sh, /deployment.yml: deployment }
    envVars:
      sshUsername:
      sshKey:
      hostname:
      deployment:
      namespace:
